(function(){var e,t,n,r;if(!this.console){this.console={},e=["log","error","info","debug","warn","trace","dir","dirxml","group","groupEnd","time","timeEnd","assert","profile","profileEnd"];for(n=0,r=e.length;n<r;n++)t=e[n],this.console[t]=function(){}}}).call(this),function(){var e,t,n,r,i;return this.require||(e={},t={},n=function(s,o){var u=r(o,s),a=t[u],f;if(a)return a.exports;if(!(f=e[u]||e[u=r(u,"./index")]))throw"module '"+s+"' not found";a={id:u,exports:{}};try{return t[u]=a,f(a.exports,function(e){return n(e,i(u))},a),a.exports}catch(l){throw delete t[u],l}},r=function(e,t){var n=[],r,i;/^\.\.?(\/|$)/.test(t)?r=[e,t].join("/").split("/"):r=t.split("/");for(var s=0,o=r.length;s<o;s++)i=r[s],i==".."?n.pop():i!="."&&i!=""&&n.push(i);return n.join("/")},i=function(e){return e.split("/").slice(0,-1).join("/")},this.require=function(e){return n(e,"")},this.require.define=function(t){var n;for(n in t)e[n]=t[n]}),this.require.define}.call(this)({"controller/limiter":function(e,t,n){(function(){var e,t=[].slice,r=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"";n.exports=e=function(){function e(e,t,n){var r,i,s;this._time_point_=e,this._config_=n!=null?n:{},s=this._time_point_.getObserverObject(),r=this._time_point_.getNotificationBusName(),s.subscribe(r,this._checkData,this),i=this._config_.scale||"days",this._who_i_am_="LIMITER",this._bounds_=t.transformToBoundsFor(i)}return e.prototype._checkData=function(){var e,n=1<=arguments.length?t.call(arguments,0):[],r=n[1];return r===this._who_i_am_?null:(e=this._bounds_.dateComparison(this._time_point_.getDate()),e===1?this._time_point_.setDate(this._who_i_am_,this._bounds_.getHihger()):e===-1&&this._time_point_.setDate(this._who_i_am_,this._bounds_.getLower()),null)},e}()}).call(this)},datepalette:function(e,t,n){(function(){"use strict";var e=jQuery,r=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",i=t(""+r+"model/widget"),s=t(""+r+"model/config_builder"),o={init:function(e,t,n,r){var o,u,a,f;return n==null&&(n={}),r==null&&(r="default"),this._checkDataChangedCbIsFunction(t),u="etc/"+r,o=s.build(n,u),f=new i(e,t,o),a=f.assembleWidget(),f.setupLimiter(),f.showProduct(a)},_checkDataChangedCbIsFunction:function(e){if(typeof e!="function")throw Error("|DatePalette.init| can`t be initializated, not a function\n|data_changed_cb| = |"+e+"|")}};n.exports=o}).call(this)},"etc/default":function(e,t,n){(function(){n.exports={components:["Caption","Epoch","Years","Months","Days"],widget:{style:"modal",target:{fill_on_init:!0,format:"DD MMMM YYYY"}},caption:{format:"DD MMMM YYYY, dddd"},years:{range:[1910,1940,1960,1980,2e3,2020,2040],leaf:{format:"YY",row_length:22}},months:{format:"MMMM",row_length:26},days:{format:"DD",row_length:18},global:{locale:"ru",debug:!1},bounds:{low:"1950-02-15",high:"2017-06-28"},limiter:{check_direct_input:!0}}}).call(this)},"etc/inline":function(e,t,n){(function(){n.exports={components:["Months","Years"],widget:{style:"inline",target:{fill_on_init:!0,format:"YYYY-MM-DD"}},years:{range:[2011,2021],leaf:{format:"YYYY",row_length:22}},months:{format:"MM",row_length:14},global:{locale:"ru",debug:!1},bounds:{low:(new Date).toString(),high:"2019-04-01"},limiter:{scale:"months"}}}).call(this)},"lib/configurator":function(e,t,n){(function(){var e,r={}.hasOwnProperty,i=t("whet.extend");n.exports=e=function(){function e(){}return e.compile=function(e,t){return i(!0,{},e,this.prototype._stringToObjectResolver(t))},e.prototype._stringToObjectResolver=function(e){var t,n,i,s=".",o={};for(n in e){if(!r.call(e,n))continue;i=e[n],t=(""+n).split(s),this._deepBuilder(o,t,i),null}return o},e.prototype._deepBuilder=function(e,t,n){var r=function(e){return e?/^\d+$/.test(e)?[]:{}:n},i=function(e,t){var n,s;while(n=t.shift())(s=e[n])==null&&(e[n]=r(t!=null?t[0]:void 0)),i(e[n],t);return null};return i(e,t),null},e}()}).call(this)},"lib/mixin_supported":function(e,t,n){(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},t=["extended","included"],r=function(){function n(){}return n.extend=function(n){var r,i,s;for(r in n)i=n[r],e.call(t,r)<0&&(this[r]=i);return(s=n.extended)!=null&&s.apply(this),this},n.include=function(n){var r,i,s;for(r in n)i=n[r],e.call(t,r)<0&&(this.prototype[r]=i);return(s=n.included)!=null&&s.apply(this),this},n}();n.exports=r}).call(this)},"lib/stack":function(e,t,n){(function(){var e=[].slice,t=function(){function t(){var t=1<=arguments.length?e.call(arguments,0):[];this._stack_=t}return t.prototype.clear=function(){return this._stack_=[]},t.prototype.fill=function(){var t=1<=arguments.length?e.call(arguments,0):[];return this._stack_=this._stack_.concat(t)},t.prototype.push=function(e){return this._stack_.push(e)},t.prototype.pop=function(){return this._stack_.pop()},t.prototype.see=function(){return this._stack_[this._stack_.length-1]},t.prototype.isEmpty=function(){return!this._stack_.length},t}();n.exports=t}).call(this)},"mixin/flattingable_vm":function(e,t,n){(function(){var e={getDateAsPlainObj:function(e,t){return t==null&&(t=this._full_date_),this._flattingDateObject(t,e)},_flattingDateObject:function(e,t){if(!t)throw Error("|"+this._who_i_am_+".get*AsString| MUST be called with format");switch(t.toUpperCase()){case"DATE":return e.date();case"MONTH":return e.month();case"YEAR":return e.year();default:return e.format(t)}}};n.exports=e}).call(this)},"mixin/formattable_vm":function(e,t,n){(function(){var e={getCaption:function(e){return this.getDateAsPlainObj(e)},getNowCaption:function(e){return this.getDateAsPlainObj(e,this._time_point_.getNow())},getYear:function(e){return e==null&&(e="year"),this.getDateAsPlainObj(e)},getNowYear:function(e){return e==null&&(e="year"),this.getDateAsPlainObj(e,this._time_point_.getNow())},getMonth:function(e){return e==null&&(e="month"),this.getDateAsPlainObj(e)},getNowMonth:function(e){return e==null&&(e="month"),this.getDateAsPlainObj(e,this._time_point_.getNow())},getDay:function(e){return e==null&&(e="date"),this.getDateAsPlainObj(e)},getNowDay:function(e){return e==null&&(e="date"),this.getDateAsPlainObj(e,this._time_point_.getNow())}};n.exports=e}).call(this)},"mixin/gridable_v":function(e,t,n){(function(){var e={_compileSplittedRange:function(e,t){var n,r,i,s,o=0,u=[],a=[];for(i=0,s=e.length;i<s;i++)n=e[i],r=n.name.length,n.in_bounds=this._inBoundsChecker(n.number),o+r>=t?(a.push(u),u=[n],o=r):(u.push(n),o+=r);return u.length&&a.push(u),a},_buildSequence:function(e,t,n){var r,i,s=[];for(r=i=e;e<=t?i<=t:i>=t;r=e<=t?++i:--i)s.push({number:r,name:n(r)});return s},_intervalAmplifier:function(e,t){var n,r,i=e.length-1,s=[e[0],e[i]],o=s[0],u=s[1],a=o.length-u.length;return a&&(n=function(){var e,n=[];for(r=e=0;0<=a?e<a:e>a;r=0<=a?++e:--e)n.push({number:null,name:t("00")});return n}(),e.splice(i,1,u.concat(n))),e}};n.exports=e}).call(this)},"mixin/observable":function(e,t,n){(function(){var e=[].slice,t={getNotificationBusName:function(){return this._out_bus_name_},getErrorBusName:function(){return this._error_bus_name_},getBroadcastErrorBusName:function(){return"ERROR"},getObserverObject:function(){return this._observer_},notifyMySubscribers:function(){var t=arguments[0],n=2<=arguments.length?e.call(arguments,1):[];return this._observerPublisher(this._out_bus_name_,t,n)},warnMySubscribers:function(){var t=arguments[0],n=2<=arguments.length?e.call(arguments,1):[];return this._observerPublisher(this._error_bus_name_,t,n)},broadcastAlert:function(){var t=arguments[0],n=2<=arguments.length?e.call(arguments,1):[];return this._observerPublisher(this.getBroadcastErrorBusName(),t,n)},_observerPublisher:function(e,t,n){return this._observer_.publishAsync.apply(this._observer_,[e,t].concat(n)),null}};n.exports=t}).call(this)},"mixin/overflowproof":function(e,t,n){(function(){var e={_overflowCorrector:function(e,t){return e.month()!==t&&(e.month(t),e.date(e.daysInMonth())),e}};n.exports=e}).call(this)},"mixin/subscrible_vm":function(e,t,n){(function(){var e={_setupFullDate:function(){return this._full_date_=this._time_point_.getDate()},_timePointWatcher:function(e,t){return this._setupFullDate(),this.notifyMySubscribers(t),null},_subscribeWatchdog:function(e,t){var n,r,i,s;t==null&&(t={}),s=(i=t.data)!=null?i.slice(0):void 0,r=s[0],n=s[1];if(r!==this._who_i_am_)throw Error(e);return this._time_point_.undoDateChanges(this._who_i_am_,n),this.warnMySubscribers(this._who_i_am_,e),null},_subscribeToChanges:function(){return this._observer_.subscribeGuarded(this._in_bus_name,this._timePointWatcher,this._subscribeWatchdog,this)}};n.exports=e}).call(this)},"model/bounds":function(e,t,n){(function(){var e,r,i=(e=this._)!=null?e:t("underscore"),s=(r=this.moment)!=null?r:t("moment"),o=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",u=function(){function e(e,t){this._low_moment_=s(e),this._high_moment_=s(t),this._low_unix_=null,this._high_unix_=null,this._type_=null,this._default_format_=null}return e.prototype.transformToBoundsFor=function(e){var t=function(){switch(e.toUpperCase()){case"YEARS":return["year","YYYY"];case"MONTHS":return["month","YYYY-MM"];case"DAYS":return["day","YYYY-MM-DD"];default:throw Error("|Bounds.transformToBoundsFor| dont know type "+e)}}();return this._type_=t[0],this._default_format_=t[1],this._low_unix_=this._roundBoundAndMakeUnix(this._low_moment_),this._high_unix_=this._roundBoundAndMakeUnix(this._high_moment_),this},e.prototype.dateComparison=function(e,t){var n;return t==null&&(t=this._default_format_),n=this._makeTrimmedUnix(e,t),this._low_unix_>n?-1:n>this._high_unix_?1:0},e.prototype.isContains=function(e,t){var n;return t==null&&(t=this._default_format_),n=this._makeTrimmedUnix(e,t),this._high_unix_>=n&&n>=this._low_unix_},e.prototype._makeTrimmedUnix=function(e,t){var n=s.isMoment(e)?e:this._makeMomentByFormat(e,t);return this._roundBoundAndMakeUnix(n)},e.prototype._roundBoundAndMakeUnix=function(e){return e.startOf(this._type_).unix()},e.prototype._makeMomentByFormat=function(e,t){return s(""+e,t)},e.prototype.getLower=function(){return this._low_moment_.clone()},e.prototype.getHihger=function(){return this._high_moment_.clone()},e}();n.exports=u}).call(this)},"model/config_builder":function(e,t,n){(function(){var e=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",r=t(""+e+"lib/configurator"),i=function(){function n(){}return n.build=function(e,t){var n;return e==null&&(e={}),n=this.prototype._configLoader(t),r.compile(n,e)},n.prototype._configLoader=function(n){var r;if(n==null)throw Error("call without filepath forbidden, aborted");r=""+e+n;try{return t(r)}catch(i){throw Error("requiring fail on loading file with error\nfilepath  = |"+r+"|\nerror     = |"+i+"|")}},n}();n.exports=i}).call(this)},"model/registry":function(e,t,n){(function(){var e,r=(e=this._)!=null?e:t("underscore"),i=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",s=t("dendrite"),o=t(""+i+"model/timepoint"),u=t(""+i+"model/bounds"),a=t(""+i+"viewmodel/year"),f=t(""+i+"viewmodel/month"),l=t(""+i+"viewmodel/day"),c=t(""+i+"viewmodel/caption"),h=function(){function e(e){this._config_=e!=null?e:{},this._observer_=new s,this._time_point_=new o(this._observer_,{lang:this._config_.locale})}return e.prototype.getBounds=function(e){return new u(e.low,e.high)},e.prototype.getYearVM=function(e){return new a(this._time_point_,e)},e.prototype.getMonthVM=function(e){return new f(this._time_point_,e)},e.prototype.getDayVM=function(e){return new l(this._time_point_,e)},e.prototype.getCaptionVM=function(e){return new c(this._time_point_,e)},e.prototype.getObserver=function(){return this._observer_},e.prototype.getTimePoint=function(){return this._time_point_},e}();n.exports=h}).call(this)},"model/timepoint":function(e,t,n){(function(){var e,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},o=[].slice,u=(e=this._)!=null?e:t("underscore"),a=(r=this.moment)!=null?r:t("moment"),f=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",l=t(""+f+"lib/stack"),c=t(""+f+"lib/mixin_supported"),h=t(""+f+"mixin/observable"),p=function(e){function t(e,t){var n;this._observer_=e,this._config_=t!=null?t:{},this._time_point_=this.buildNewMoment(),this._tick_=0,this._undo_stack_=new l,n="TIMEPOINT",this._out_bus_name_=""+n+".DATE_CHANGED",this._error_bus_name_=""+n+".ERROR",this._lang_=this._config_.lang||"en"}return s(t,e),t.include(h),t.prototype.setDate=function(){var e=arguments[0],t=2<=arguments.length?o.call(arguments,1):[],n=this.buildNewMoment.apply(null,t);return this._saveMoment(),this._time_point_=n,this.notifyMySubscribers(e,this._tick_),this},t.prototype.getNow=function(e){return this._convertObject(this.buildNewMoment(),e)},t.prototype.getDate=function(e){return this._convertObject(this._time_point_,e)},t.prototype._convertObject=function(e,t){var n;t==null&&(t="moment");switch(t.toLowerCase()){case"js":return e.toDate();case"epox_ms":return e.valueOf();case"moment":return n=e.clone(),n.lang(this._lang_),n;default:throw Error("|TimePoint.get*| don't now |"+t+"| type")}},t.prototype.undoDateChanges=function(e,t){if(this._undo_stack_.isEmpty())throw Error("undoDateChanges aborted, undo stack is empty");if(!t)throw Error("undoDateChanges aborted, void tick argument is forbidden");if(t!==this._tick_)throw Error("undoDateChanges aborted, tick mismatch");return this.setDate(e,this.buildNewMoment(this._undo_stack_.pop()))},t.prototype.buildNewMoment=function(){var e=1<=arguments.length?o.call(arguments,0):[],t=a.prototype.constructor.apply(null,e);if(!t.isValid())throw Error("creation aborted, invalid data |"+e+"|");return t},t.prototype._setNextTick=function(){return this._tick_=this._tick_+1},t.prototype._saveMoment=function(){return this._undo_stack_.push(this.getDate("epox_ms")),this._setNextTick(),null},t}(c);n.exports=p}).call(this)},"model/widget":function(e,t,n){(function(){var e,r=(e=this._)!=null?e:t("underscore"),i=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",s=t(""+i+"model/registry"),o=t(""+i+"controller/limiter"),u=t(""+i+"view/layout"),a=t(""+i+"view/epoch"),f=t(""+i+"view/years"),l=t(""+i+"view/months"),c=t(""+i+"view/days"),h=t(""+i+"view/caption"),p=t(""+i+"view/modal"),d=t(""+i+"view/inline"),v=function(){function e(e,t,n){this._target_=e,this._user_data_changed_cb_=t,this._config_=n!=null?n:{},this._uuid_=r.uniqueId("DPalette_"),this._registry_=new s(this._config_.global),this._time_point_=this._registry_.getTimePoint(),this._year_vm_=this._registry_.getYearVM(this._config_.years),this._month_vm_=this._registry_.getMonthVM(),this._day_vm_=this._registry_.getDayVM(),this._caption_vm_=this._registry_.getCaptionVM()}return e.prototype.setupLimiter=function(){return this._createLimiter()},e.prototype._createLimiter=function(){return new o(this._time_point_,this.getBounds(),this._config_.limiter)},e.prototype.showProduct=function(e){var t=this._config_.widget.style,n=function(){switch(t.toUpperCase()){case"MODAL":return this._createProductAsModal();case"INLINE":return this._createProductAsInline();default:throw Error("|Product| - can`t create presentation style - unknown \n|widget_style| = |"+t+"|")}}.call(this);return n.inject(e),null},e.prototype._createProductAsModal=function(){var e;return e=new p(this,this._caption_vm_,this._config_.widget)},e.prototype._createProductAsInline=function(){var e;return e=new d(this,this._caption_vm_,this._config_.widget)},e.prototype.createLayout=function(){return u.createView(this._uuid_)},e.prototype.getUserDataChangedCb=function(){return this._user_data_changed_cb_},e.prototype.getTarget=function(){return this._target_},e.prototype.getUUID=function(){return this._uuid_},e.prototype.createElement=function(e){switch(e.toUpperCase()){case"EPOCH":return this._createEpoch();case"YEARS":return this._createYears();case"MONTHS":return this._createMonths();case"DAYS":return this._createDays();case"CAPTION":return this._createCaption();default:throw Error("|Widget.createElement| dont know element "+e)}},e.prototype.getObserver=function(){return this._registry_.getObserver()},e.prototype.getBounds=function(){return this._registry_.getBounds(this._config_.bounds)},e.prototype.assembleWidget=function(){var e,t,n,r=this.createLayout(),i=this._config_.components;for(t=0,n=i.length;t<n;t++)e=i[t],$(r).append(this.createElement(e)),null;return r},e.prototype._createEpoch=function(){var e=new a(this._year_vm_,this.getBounds());return e.createView()},e.prototype._createYears=function(){var e=new f(this._year_vm_,this.getBounds(),this._config_.years.leaf);return e.createView()},e.prototype._createMonths=function(){var e=new l(this._month_vm_,this.getBounds(),this._config_.months);return e.createView()},e.prototype._createDays=function(){var e=new c(this._day_vm_,this._month_vm_,this.getBounds(),this._config_.days);return e.createView()},e.prototype._createCaption=function(){var e=new h(this._caption_vm_,this.getBounds(),this._config_.caption);return e.createView()},e}();n.exports=v}).call(this)},"template/caption":function(e,t,n){n.exports=function(e){var t,n,r,i,s,o;return e||(e={}),t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},s=e.safe,o=e.escape,i=e.safe=function(e){var t;if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";return t=new String(e),t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){t.push('<div class="ui-datepalette-header ui-widget-header ui-helper-clearfix ui-corner-all">\n  '),t.push(r(this.caption)),t.push("\n</div>")}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"template/epoch":function(e,t,n){n.exports=function(e){var t,n,r,i,s,o;return e||(e={}),t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},s=e.safe,o=e.escape,i=e.safe=function(e){var t;if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";return t=new String(e),t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,i,s,o;t.push('<ul class="ui-datepalette-root ui-datepalette-margin">\n  '),o=this.ranges;for(i=0,s=o.length;i<s;i++)e=o[i],t.push("\n    "),n="ui-state-default ui-corner-all",t.push("\n    "),e.in_bounds||(n+=" ui-state-disabled"),t.push("\n    "),e.number===this.selected&&(n+=" ui-state-highlight"),t.push('\n    <li class="'),t.push(r(n)),t.push('" data-datepalette="'),t.push(r(e.number)),t.push('">'),t.push(r(e.name)),t.push("</li>\n  ");t.push("\n</ul>\n")}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"template/layout":function(e,t,n){n.exports=function(e){var t,n,r,i,s,o;return e||(e={}),t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},s=e.safe,o=e.escape,i=e.safe=function(e){var t;if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";return t=new String(e),t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){t.push('<div id="'),t.push(r(this.mainDivId)),t.push('" class="ui-datepalette ui-widget ui-widget-content ui-helper-clearfix ui-corner-all">\n\n</div>')}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"template/leaf":function(e,t,n){n.exports=function(e){var t,n,r,i,s,o;return e||(e={}),t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},s=e.safe,o=e.escape,i=e.safe=function(e){var t;if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";return t=new String(e),t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,i,s,o,u,a,f;t.push('<div class="ui-datepalette-margin">\n\n'),f=this.range;for(s=0,u=f.length;s<u;s++){i=f[s],t.push('\n\n  <ul class="ui-datepalette-leaf">\n  \n  ');for(o=0,a=i.length;o<a;o++)e=i[o],t.push("\n\n    "),n="ui-state-default",t.push("\n    "),e.in_bounds||(n+=" ui-state-disabled"),t.push("\n    "),e.number===this.selected&&(n+=" ui-state-active"),t.push("\n    "),e.number===null&&(n+=" ui-datepalette-leaf-hide"),t.push('\n    \n    <li class="'),t.push(r(n)),t.push('" data-datepalette="'),t.push(r(e.number)),t.push('">'),t.push(r(e.name)),t.push("</li>\n  \n  ");t.push("\n\n  </ul>\n\n")}t.push("\n\n</div>")}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}},"view/caption":function(e,t,n){(function(){var e,r,i,s;if(!this.Metamorph)throw Error("sorry, resolve Methamorph dependency first!");e=jQuery,i=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",s=t(""+i+"template/caption"),n.exports=r=function(){function t(e,t,n){var r,i;this._caption_vm_=e,this._bounds_=t,this._config_=n!=null?n:{},i=this._caption_vm_.getObserverObject(),r=this._caption_vm_.getNotificationBusName(),i.subscribe(r,this._updateData,this),this._morph_=Metamorph(this._renderContent())}return t.prototype.createView=function(){return e("<div>").append(this._morph_.outerHTML())},t.prototype._renderContent=function(){return s({caption:this._caption_vm_.getCaption(this._config_.format)})},t.prototype._updateData=function(){return this._morph_.html(this._renderContent())},t}()}).call(this)},"view/days":function(e,t,n){(function(){var e,r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};if(!this.Metamorph)throw Error("sorry, resolve Methamorph dependency first!");e=jQuery,o=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",s=t(""+o+"lib/mixin_supported"),i=t(""+o+"mixin/gridable_v"),u=t(""+o+"template/leaf"),n.exports=r=function(t){function n(e,t,n,r){var i,s;this._view_model_=e,this._month_vm_=t,this._config_=r!=null?r:{},this._handler=a(this._handler,this),s=this._view_model_.getObserverObject(),i=this._view_model_.getNotificationBusName(),s.subscribe(i,this._updateData,this),this._formatter_=this._makeFormatter(this._config_.format),this._bounds_=n.transformToBoundsFor("days"),this._morph_=Metamorph(this._renderContent())}return l(n,t),n.include(i),n.prototype.createView=function(){return e("<div>").on("click","li",this._handler).append(this._morph_.outerHTML())},n.prototype._renderContent=function(){var e=this._month_vm_.getDaysInMonth(),t=this._buildSequence(1,e,this._formatter_),n=this._compileSplittedRange(t,this._config_.row_length);return u({range:this._intervalAmplifier(n,this._formatter_),selected:this._view_model_.getDay()})},n.prototype._makeFormatter=function(e){switch(e.toUpperCase()){case"D":return function(e){return""+e};case"DD":return function(e){return("0"+e).slice(-2)}}},n.prototype._inBoundsChecker=function(e){var t=("0"+e).slice(-2),n=""+this._view_model_.getYear()+"-"+this._view_model_.getMonth("MM")+"-"+t;return this._bounds_.isContains(n)},n.prototype._updateData=function(){return this._morph_.html(this._renderContent())},n.prototype._handler=function(t){var n=e(t.target).closest("li");if(n.hasClass("ui-state-disabled"))return null;try{this._view_model_.setDay(n.data("datepalette"))}catch(r){e("<div></div>").html(""+r).dialog({title:"Error message"})}return null},n}(s)}).call(this)},"view/epoch":function(e,t,n){(function(){var e,r,i,s,o,u=function(e,t){return function(){return e.apply(t,arguments)}};if(!this.Metamorph)throw Error("sorry, resolve Methamorph dependency first!");e=jQuery,s=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",r=t(""+s+"model/bounds"),o=t(""+s+"template/epoch"),n.exports=i=function(){function t(e,t,n){var r,i;this._year_vm_=e,this._config_=n!=null?n:{},this._handler=u(this._handler,this),i=this._year_vm_.getObserverObject(),r=this._year_vm_.getNotificationBusName(),i.subscribe(r,this._updateData,this),this._bounds_=t.transformToBoundsFor("years"),this._morph_=Metamorph(this._renderContent())}return t.prototype.createView=function(){return e("<div>").on("click","li",this._handler).append(this._morph_.outerHTML())},t.prototype._renderContent=function(){return o({ranges:this._rangeConcentrator(this._year_vm_.getAvaibleEraPoints()),selected:this._year_vm_.getEraStart()})},t.prototype._rangeConcentrator=function(e){var t,n,r,i,s=[];for(n=r=0,i=e.length;r<i;n=++r)t=e[n],e[n+1]&&s.push({number:t,name:t,in_bounds:this._complexInBoundsChecker(t,e[n+1])});return s},t.prototype._complexInBoundsChecker=function(e,t){return this._inBoundsChecker(e)||this._reverseInBounceChecker(""+e+"-01-01",""+t+"-01-01")},t.prototype._inBoundsChecker=function(e){return this._bounds_.isContains(e)},t.prototype._reverseInBounceChecker=function(e,t){var n=(new r(e,t)).transformToBoundsFor("years");return n.isContains(this._bounds_.getLower().format("YYYY"))},t.prototype._updateData=function(){return this._morph_.html(this._renderContent())},t.prototype._handler=function(t){var n=e(t.target).closest("li");if(n.hasClass("ui-state-disabled"))return null;try{this._year_vm_.setEra(n.data("datepalette"))}catch(r){e("<div></div>").html(""+r).dialog({title:"Error message"})}return null},t}()}).call(this)},"view/inline":function(e,t,n){(function(){var e,t,r;if(!this.Metamorph)throw Error("sorry, resolve Methamorph dependency first!");e=jQuery,r=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",n.exports=t=function(){function t(e,t,n){var r,i;this._wibget_obj_=e,this._caption_vm_=t,this._config_=n!=null?n:{},this._uuid_=this._wibget_obj_.getUUID(),this._target_=this._wibget_obj_.getTarget(),this._user_data_changed_cb_=this._wibget_obj_.getUserDataChangedCb(),i=this._caption_vm_.getObserverObject(),r=this._caption_vm_.getNotificationBusName(),this._config_.target.fill_on_init&&this._user_data_changed_cb_.call(this),i.subscribe(r,this._user_data_changed_cb_,this),this._wrapper_=this._createWrapper(this._uuid_)}return t.prototype._createWrapper=function(){return e("<div>")},t.prototype.inject=function(t){return this._wrapper_.append(t).appendTo(this._target_),e(this._target_).addClass("hasDatePalette"),!1},t.prototype.getResult=function(e){return e==null&&(e=this._config_.target.format),this._caption_vm_.getCaption(e)},t}()}).call(this)},"view/layout":function(e,t,n){(function(){var e,r=function(e,t){return function(){return e.apply(t,arguments)}},i=jQuery,s=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",o=t(""+s+"template/layout");n.exports=e=function(){function e(){this._handler=r(this._handler,this)}return e.createView=function(e){var t=o({mainDivId:e});return i(t).on("hover","li",this.prototype._handler)},e.prototype._handler=function(e){var t=i(e.target);switch(e.type){case"mouseenter":if(!t.hasClass("ui-state-disabled"))return t.addClass("ui-state-hover");break;case"mouseleave":return t.removeClass("ui-state-hover")}},e}()}).call(this)},"view/modal":function(e,t,n){(function(){var e,t,r;if(!this.Metamorph)throw Error("sorry, resolve Methamorph dependency first!");e=jQuery,r=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",n.exports=t=function(){function t(e,t,n){var r,i;this._wibget_obj_=e,this._caption_vm_=t,this._config_=n!=null?n:{},this._uuid_=this._wibget_obj_.getUUID(),this._target_=this._wibget_obj_.getTarget(),this._user_data_changed_cb_=this._wibget_obj_.getUserDataChangedCb(),i=this._caption_vm_.getObserverObject(),r=this._caption_vm_.getNotificationBusName(),this._config_.target.fill_on_init&&this._user_data_changed_cb_.call(this),i.subscribe(r,this._user_data_changed_cb_,this),this._wrapper_=this._createWrapper(this._uuid_)}return t.prototype._createWrapper=function(t){return e("<div>",{id:"reveal-"+t,"class":"reveal-modal"})},t.prototype.inject=function(t){var n=this;return this._wrapper_.append(t).appendTo("body"),e(this._target_).on("click",function(){return n._wrapper_.reveal(),!1}),e(this._target_).addClass("hasDatePalette"),!1},t.prototype.getResult=function(){return this._caption_vm_.getCaption(this._config_.target.format)},t}()}).call(this)},"view/months":function(e,t,n){(function(){var e,r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};if(!this.Metamorph)throw Error("sorry, resolve Methamorph dependency first!");e=jQuery,o=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",i=t(""+o+"lib/mixin_supported"),r=t(""+o+"mixin/gridable_v"),u=t(""+o+"template/leaf"),n.exports=s=function(t){function n(e,t,n){var r,i;this._view_model_=e,this._config_=n!=null?n:{},this._handler=a(this._handler,this),i=this._view_model_.getObserverObject(),r=this._view_model_.getNotificationBusName(),i.subscribe(r,this._updateData,this),this._bounds_=t.transformToBoundsFor("months"),this._all_months_names_=this._view_model_.getAllMonths(this._config_.format),this._morph_=Metamorph(this._renderContent())}return l(n,t),n.include(r),n.prototype.createView=function(){return e("<div>").on("click","li",this._handler).append(this._morph_.outerHTML())},n.prototype._renderContent=function(){return u({range:this._compileSplittedRange(this._all_months_names_.slice(0),this._config_.row_length),selected:this._view_model_.getMonth()})},n.prototype._inBoundsChecker=function(e){var t=("0"+(e+1)).slice(-2),n=""+this._view_model_.getYear()+"-"+t;return this._bounds_.isContains(n)},n.prototype._updateData=function(){return this._morph_.html(this._renderContent())},n.prototype._handler=function(t){var n=e(t.target).closest("li");if(n.hasClass("ui-state-disabled"))return null;try{this._view_model_.setMonth(n.data("datepalette"))}catch(r){e("<div></div>").html(""+r).dialog({title:"Error message"})}return null},n}(i)}).call(this)},"view/years":function(e,t,n){(function(){var e,r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};if(!this.Metamorph)throw Error("sorry, resolve Methamorph dependency first!");e=jQuery,o=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",i=t(""+o+"lib/mixin_supported"),r=t(""+o+"mixin/gridable_v"),u=t(""+o+"template/leaf"),n.exports=s=function(t){function n(e,t,n){var r,i;this._year_vm_=e,this._config_=n!=null?n:{},this._handler=a(this._handler,this),i=this._year_vm_.getObserverObject(),r=this._year_vm_.getNotificationBusName(),i.subscribe(r,this._updateData,this),this._formatter_=this._makeFormatter(this._config_.format),this._bounds_=t.transformToBoundsFor("years"),this._morph_=Metamorph(this._renderContent())}return l(n,t),n.include(r),n.prototype.createView=function(){return e("<div>").on("click","li",this._handler).append(this._morph_.outerHTML())},n.prototype._renderContent=function(){var e=this._year_vm_.getEraRanges(),t=e[0],n=e[1],r=this._buildSequence(t,n-1,this._formatter_),i=this._compileSplittedRange(r,this._config_.row_length);return u({range:this._intervalAmplifier(i,this._formatter_),selected:this._year_vm_.getYear()})},n.prototype._inBoundsChecker=function(e){return this._bounds_.isContains(e)},n.prototype._makeFormatter=function(e){switch(e.toUpperCase()){case"YY":return function(e){return(""+e).slice(-2)};case"YYYY":return function(e){return""+e}}},n.prototype._updateData=function(){return this._morph_.html(this._renderContent())},n.prototype._handler=function(t){var n=e(t.target).closest("li");if(n.hasClass("ui-state-disabled"))return null;try{this._year_vm_.setYear(n.data("datepalette"))}catch(r){e("<div></div>").html(""+r).dialog({title:"Error message"})}return null},n}(i)}).call(this)},"viewmodel/caption":function(e,t,n){(function(){var e,r={}.hasOwnProperty,i=function(e,t){function i(){this.constructor=e}for(var n in t)r.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s=(e=this._)!=null?e:t("underscore"),o=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",u=t(""+o+"lib/mixin_supported"),a=t(""+o+"mixin/observable"),f=t(""+o+"mixin/subscrible_vm"),l=t(""+o+"mixin/flattingable_vm"),c=t(""+o+"mixin/formattable_vm"),h=function(e){function t(e,t){this._time_point_=e,this._config_=t!=null?t:{},this._observer_=this._time_point_.getObserverObject(),this._in_bus_name=this._time_point_.getNotificationBusName(),this._who_i_am_="CAPTION",this._out_bus_name_=""+this._who_i_am_+".DATE_CHANGED",this._error_bus_name_=""+this._who_i_am_+".ERROR",this._full_date_=null,this._setupFullDate(),this._subscribeToChanges()}return i(t,e),t.include(a),t.include(f),t.include(l),t.include(c),t}(u);n.exports=h}).call(this)},"viewmodel/day":function(e,t,n){(function(){var e,r={}.hasOwnProperty,i=function(e,t){function i(){this.constructor=e}for(var n in t)r.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s=(e=this._)!=null?e:t("underscore"),o=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",u=t(""+o+"lib/mixin_supported"),a=t(""+o+"mixin/observable"),f=t(""+o+"mixin/subscrible_vm"),l=t(""+o+"mixin/flattingable_vm"),c=t(""+o+"mixin/formattable_vm"),h=function(e){function t(e,t){this._time_point_=e,this._config_=t!=null?t:{},this._observer_=this._time_point_.getObserverObject(),this._in_bus_name=this._time_point_.getNotificationBusName(),this._who_i_am_="DAY",this._out_bus_name_=""+this._who_i_am_+".DATE_CHANGED",this._error_bus_name_=""+this._who_i_am_+".ERROR",this._full_date_=null,this._setupFullDate(),this._subscribeToChanges()}return i(t,e),t.include(a),t.include(f),t.include(l),t.include(c),t.prototype.setDay=function(e){return s.isString(e)&&(e=this._stringToNumberDayConverter(e)),e===this.getDay()?this:(this._setDayToTimePoint(e),this)},t.prototype._stringToNumberDayConverter=function(e){var t;if(t=parseInt(e,10))return t;throw this._errorInvalidDay(e)},t.prototype._setDayToTimePoint=function(e){var t=this._changeDayInTimePoint(e);return this._time_point_.setDate(this._who_i_am_,t),null},t.prototype._changeDayInTimePoint=function(e){return this._time_point_.getDate().date(e)},t.prototype._errorInvalidDay=function(e){return Error("|"+this._who_i_am_+"| - day is invalid |"+e+"|")},t}(u);n.exports=h}).call(this)},"viewmodel/month":function(e,t,n){(function(){var e,r={}.hasOwnProperty,i=function(e,t){function i(){this.constructor=e}for(var n in t)r.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s=(e=this._)!=null?e:t("underscore"),o=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",u=t(""+o+"lib/mixin_supported"),a=t(""+o+"mixin/overflowproof"),f=t(""+o+"mixin/observable"),l=t(""+o+"mixin/subscrible_vm"),c=t(""+o+"mixin/flattingable_vm"),h=t(""+o+"mixin/formattable_vm"),p=function(e){function t(e,t){this._time_point_=e,this._config_=t!=null?t:{},this._observer_=this._time_point_.getObserverObject(),this._in_bus_name=this._time_point_.getNotificationBusName(),this._who_i_am_="MONTH",this._out_bus_name_=""+this._who_i_am_+".DATE_CHANGED",this._error_bus_name_=""+this._who_i_am_+".ERROR",this._month_idx_={first:0,last:11},this._full_date_=null,this._setupFullDate(),this._subscribeToChanges()}return i(t,e),t.include(a),t.include(f),t.include(l),t.include(c),t.include(h),t.prototype.getDaysInMonth=function(e){var t;return e?(s.isString(e)&&(e=this._stringToNumberMonthConverter(e)),t=this._changeMonthInTimePoint(e),t.daysInMonth()):this._full_date_.daysInMonth()},t.prototype.getMonthName=function(e,t){if(e==null||!t)throw Error("|Month.getMonthName| MUST be called with month AND format but got\nmonth   = |"+e+"|\nformat  = |"+t+"|");return this.getDateAsPlainObj(t,this._changeMonthInTimePoint(e))},t.prototype.getAllMonths=function(e){var t,n,r,i,s;if(!e)throw Error("|Month.getAllMonths| MUST be called with format but got\nformat  = |"+e+"|");s=[];for(t=n=r=this._month_idx_.first,i=this._month_idx_.last;r<=i?n<=i:n>=i;t=r<=i?++n:--n)s.push({number:t,name:this.getMonthName(t,e)});return s},t.prototype.setMonth=function(e){return s.isString(e)&&(e=this._stringToNumberMonthConverter(e)),e===this.getMonth()?this:(this._setMonthToTimePoint(e),this)},t.prototype._setMonthToTimePoint=function(e){var t=this._changeMonthInTimePoint(e);return this._time_point_.setDate(this._who_i_am_,t),null},t.prototype._changeMonthInTimePoint=function(e){if(!this._isMonthNumberValid(e))throw this._errorInvalidMonth(e);return this._overflowCorrector(this._time_point_.getDate().month(e),e)},t.prototype._isMonthNumberValid=function(e){return this._month_idx_.last>=e&&e>=this._month_idx_.first},t.prototype._nameToNumberMonthConverter=function(e){var t,n=this._time_point_.buildNewMoment(e,"MMMM");if(!n.isValid())throw this._errorInvalidMonth(e);t=new RegExp("\\|"+e+"\\|","i");if(!t.test(n.format("|MMM|MMMM|")))throw this._errorInvalidMonth(e);return n.month()},t.prototype._stringToNumberMonthConverter=function(e){var t;return(t=parseInt(e,10))?t:this._nameToNumberMonthConverter(e)},t.prototype._errorInvalidMonth=function(e){return Error("|"+this._who_i_am_+"| - month is invalid |"+e+"|")},t}(u);n.exports=p}).call(this)},"viewmodel/year":function(e,t,n){(function(){var e={}.hasOwnProperty,r=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},i=typeof GLOBAL!="undefined"&&GLOBAL!==null?"../":"",s=t(""+i+"lib/mixin_supported"),o=t(""+i+"mixin/overflowproof"),u=t(""+i+"mixin/observable"),a=t(""+i+"mixin/subscrible_vm"),f=t(""+i+"mixin/flattingable_vm"),l=t(""+i+"mixin/formattable_vm"),c=function(e){function t(e,t){this._time_point_=e,this._config_=t!=null?t:{},this._observer_=this._time_point_.getObserverObject(),this._in_bus_name=this._time_point_.getNotificationBusName(),this._who_i_am_="YEAR",this._out_bus_name_=""+this._who_i_am_+".DATE_CHANGED",this._error_bus_name_=""+this._who_i_am_+".ERROR",this._years_range_=this._config_.range,this._full_date_=null,this._setupFullDate(),this._subscribeToChanges()}return r(t,e),t.include(o),t.include(u),t.include(a),t.include(f),t.include(l),t.prototype.setYear=function(e){return e===this.getYear()?this:(this._setYearToTimePoint(e),this)},t.prototype.setEra=function(e){var t,n,r,i,s=this.getEraStart();return e===s?this:(i=e+this.getYear()-s,r=this._buildEraRange(i),n=e===r[0]?i:(t=this._buildEraRange(e),t[1]-1),this.setYear(n))},t.prototype.getAvaibleEraPoints=function(){return this._years_range_.slice(0)},t.prototype.getEraStart=function(){return this.getEraRanges()[0]},t.prototype.getEraRanges=function(){return this._buildEraRange(this.getYear())},t.prototype._setYearToTimePoint=function(e){var t=this._changeYearInTimePoint(e);return this._buildEraRange(t.year()),this._time_point_.setDate(this._who_i_am_,t),null},t.prototype._buildEraRange=function(e){var t;if(!(t=this._findYearPlaceInYearsRange(e,this._years_range_)))throw Error("|"+this._who_i_am_+"| - year out of ranges |"+e+"|");return t},t.prototype._changeYearInTimePoint=function(e){var t=this._time_point_.getDate(),n=t.month();return this._overflowCorrector(t.year(e),n)},t.prototype._findYearPlaceInYearsRange=function(e,t){var n,r,i=t.slice(0);while((n=i.pop())&&(r=i[i.length-1]))if(n>e&&e>=r)return[r,n]},t}(s);n.exports=c}).call(this)},dendrite:function(e,t,n){(function(){var e,r,i=[].slice,s=(r=this._)!=null?r:t("underscore");n.exports=e=function(){function o(e){e==null&&(e={}),this._subscriptions_={},this._publishing_counter_=0,this._unsubscribe_queue_=[],this._tasks_counter_=0,this._tasks_dictionary_={},this._observer_verbose_level_=this._parseVerboseLevel(e!=null?e.verbose:void 0)}var e=3,t=2,n=1,r=0;return o.prototype.subscribe=function(e,t,n){return n==null&&(n={}),this.subscribeGuarded(e,t,void 0,n)},o.prototype.subscribeGuarded=function(e,t,n,r){var i,o,u,a,f,l;r==null&&(r={});if(!(s.isString(e)||s.isFunction(t)||n==null||s.isFunction(n)))throw this._subscribeErrorMessage(e,t,n,r);i=this._getNextTaskNumber(),this._tasks_dictionary_[i]=[t,r,n],l=this._topicsToArraySplitter(e);for(a=0,f=l.length;a<f;a++)o=l[a],(u=this._subscriptions_)[o]||(u[o]=[]),this._subscriptions_[o].push(i);return{topics:e,callback:t,watchdog:n,context:r}},o.prototype.unsubscribe=function(e,t,n){var r,i,o,u,a,f,l,c,h,p,d;e.topics&&(h=this._handlerParser(e,t,n),e=h[0],t=h[1],n=h[2]),n||(n={});if(!s.isString(e))throw this._unsubscribeErrorMessage(e,t,n);if(this._isPublishing())return this._unsubscribe_queue_.push([e,t,n]),this;p=this._topicsToArraySplitter(e);for(a=0,l=p.length;a<l;a++){u=p[a];if(s.isFunction(t)){d=this._subscriptions_[u];for(r=f=0,c=d.length;f<c;r=++f)o=d[r],(i=this._tasks_dictionary_[o])&&s.isEqual([i[0],i[1]],[t,n])&&this._subscriptions_[u].splice(r,1)}else delete this._subscriptions_[u]}return this},o.prototype.publish=function(){var e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[];return this._publisher("sync",e,t),this},o.prototype.publishSync=function(){var e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[];return this._publisher("sync",e,t),this},o.prototype.publishAsync=function(){var e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[];return this._publisher("async",e,t),this},o.prototype._isPublishing=function(){return!!this._publishing_counter_},o.prototype._publishingInc=function(){return this._publishing_counter_+=1,null},o.prototype._publishingDec=function(){if(!this._isPublishing)throw Error("Error on decrement publishing counter\n  @_publishing_counter_ is |"+this._publishing_counter_+"|");return this._publishing_counter_-=1,null},o.prototype._getNextTaskNumber=function(){return this._tasks_counter_+=1},o.prototype._parseVerboseLevel=function(i){if(i==null)return n;if(!s.isString(i))throw this._parseVerboseLevelError(i);switch(i.toUpperCase()){case"DEBUG":return e;case"SILENT":return r;case"ERROR":return n;case"WARNING":return t;default:throw Error("unknown verbose level |"+i+"|")}},o.prototype._publisherEngine=function(e){var t=this,n={sync:{publish:t._publishFiring,unsubscribe:t._unsubscribeResume},async:{publish:function(e,n,r){return setTimeout(function(){return t._publishFiring(e,n,r)},0)},unsubscribe:function(){return setTimeout(function(){return t._unsubscribeResume()},0)}}},r=n[e];if(r==null)throw TypeError("Error undefined publisher engine type |"+e+"|");return[r.publish,r.unsubscribe]},o.prototype._publisher=function(e,t,n){var r,i,o,u,a,f,l,c,h,p,d;if(!s.isString(t))throw this._publishErrorMessage(t,n);c=this._publisherEngine(e),l=c[0],d=c[1],h=this._topicsToArraySplitter(t,!1);for(o=0,a=h.length;o<a;o++){i=h[o];if(this._subscriptions_[i]){p=this._subscriptions_[i];for(u=0,f=p.length;u<f;u++)r=p[u],this._publishingInc(),l.call(this,i,this._tasks_dictionary_[r],n)}}return d.call(this),null},o.prototype._topicsToArraySplitter=function(e,t){var n,r,i,s,o,u;t==null&&(t=!0),r={},o=e.split(" "),u=[];for(i=0,s=o.length;i<s;i++){n=o[i];if(n==="")continue;if(t&&r[n])continue;r[n]=!0,u.push(n)}return u},o.prototype._handlerParser=function(e,t,n){var r;return t||(t=e.callback),n||(n=e.context),r=e.topics,[r,t,n]},o.prototype._unsubscribeResume=function(){var t,n;if(!this._unsubscribe_queue_.length)return;if(this._isPublishing()){this._observer_verbose_level_>=e&&typeof console!="undefined"&&console!==null&&console.log("still publishing");return}while(t=typeof (n=this._unsubscribe_queue_).shift=="function"?n.shift():void 0)this._observer_verbose_level_>=e&&typeof console!="undefined"&&console!==null&&console.log("retry unsubscribe "+t),this.unsubscribe.apply(this,t);return null},o.prototype._publishFiring=function(e,t,r){var i;try{t[0].apply(t[1],[e].concat(r))}catch(s){(i=t[2])!=null&&i.call(t[1],s,{topic:e,callback:t[0],object:t[1],data:r}),this._observer_verbose_level_>=n&&typeof console!="undefined"&&console!==null&&console.error("Error on call callback we got exception:\n  topic     = |"+e+"|\n  callback  = |"+t[0]+"|\n  watchdog  = |"+t[2]+"|\n  object    = |"+t[1]+"|\n  data      = |"+(r!=null?r.join(", "):void 0)+"|\n  error     = |"+s+"|")}finally{this._publishingDec()}return null},o.prototype._publishErrorMessage=function(e,t){return new TypeError("Error on call |publish| used non-string topics:\n  topics  = |"+e+"|\n  data    = |"+(t!=null?t.join(", "):void 0)+"|")},o.prototype._unsubscribeErrorMessage=function(e,t,n){return new TypeError("Error on call |unsubscribe| used non-string topics:\n  topics    = |"+e+"|\n  callback  = |"+t+"|\n  context   = |"+n+"|")},o.prototype._subscribeErrorMessage=function(e,t,n,r){return new TypeError("Error! on call |subscribe| used non-string topics OR/AND callback isn`t function OR/AND watchdog defined but isn`t function:\n  topics    = |"+e+"|\n  callback  = |"+t+"|\n  watchdog  = |"+n+"|\n  context   = |"+r+"|")},o.prototype._parseVerboseLevelError=function(e){return new TypeError("Error on parsing verbose level - not a String |"+e+"|")},o}()}).call(this)},"whet.extend":function(e,t,n){(function(){var e,t,r,i,s,o,u,a,f=[].slice;n.exports=e=function(){var e,n,i,s,u,a,l=arguments[0],c=arguments[1],h=3<=arguments.length?f.call(arguments,2):[];r(l,"Boolean")||(h.unshift(c),a=[l||{},!1],c=a[0],l=a[1]),o(c)&&(c={});for(s=0,u=h.length;s<u;s++){i=h[s];if(i!=null)for(n in i)e=i[n],e!=null&&c[n]!==e&&(c[n]=t(l,e,c[n]))}return c},r=function(e,t){return"[object "+t+"]"===Object.prototype.toString.call(e)},i=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u=function(e,t){return t===typeof e},s=function(e){var t;if(!e)return!1;if(e.nodeType||e.setInterval||!r(e,"Object"))return!1;if(e.constructor&&!i(e,"constructor")&&!i(e.constructor.prototype,"isPrototypeOf"))return!1;for(t in e)t;return t===void 0||i(e,t)},o=function(e){return!u(e,"object")&&!u(e,"function")},a=function(e,t){return r(e,"Array")?r(t,"Array")?t:[]:s(t)?t:{}},t=function(t,n,i){var o;return t&&(r(n,"Array")||s(n))?(o=a(n,i),e(t,o,n)):n}}).call(this)}})